---
- name: Configure standard ACL
  hosts: R2
  gather_facts: false
  connection: network_cli
 
  tasks:
    - name: Create extended IP access list REQ1
      ios_config:
        lines:
          - ip access-list extended REQ1
          - deny tcp any any eq telnet
          - permit ip any any
      tags:
        - create_acl

    - name: Apply ACL REQ1 to interface Ethernet0/1 outbound
      ios_config:
        lines:
          - ip access-group REQ1 out
        parents: interface Ethernet0/1
      tags:
        - apply_acl

   - name: Check result
     ios_command:
       commands: sh run | begin line vty 0 4
     register: result
     tags: show

   - name: Print result
     debug:
       var: result.stdout_lines
     tags: show
